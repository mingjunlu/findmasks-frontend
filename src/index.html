<!DOCTYPE html>
<html lang="zh-Hant-TW">
    <head>
        <!-- Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-157952368-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { window.dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'UA-157952368-1');
        </script>

        <!-- Site Info -->
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta name="description" content="健保特約藥局、衛生所口罩庫存查詢地圖，資料來源為保險署提供之開放資料。口罩數量以藥局、衛生所實際存量為主，線上查詢之數量僅供參考。" />
        <title>口罩咧？</title>

        <!-- Favicons -->
        <link rel="apple-touch-icon" sizes="180x180" data-href="/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" data-href="/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" data-href="/favicon-16x16.png" />
        <link rel="manifest" data-href="/site.webmanifest" />
        <script>
            document.querySelectorAll('link[data-href]').forEach((tag) => {
                tag.setAttribute('href', tag.dataset.href);
                tag.removeAttribute('data-href');
            });
        </script>

        <!-- Critical Styles -->
        <style>
            html, body, #map {
                width: 100vw;
                height: 100vh;
                overflow: hidden;
            }
            .loading-layer {
                position: fixed;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                background-color: rgb(97, 189, 172);
                z-index: 5;
                transition: background-color ease-in 400ms;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .loading-layer--transparent {
                background-color: transparent;
            }
            @keyframes sk-bounce {
                0%, 100% { transform: scale(0.0); }
                50% { transform: scale(1.0); }
            }
            .spinner {
                width: 40px;
                height: 40px;
                position: relative;
                margin: 100px auto;
            }
            .double-bounce1, .double-bounce2 {
                width: 100%;
                height: 100%;
                border-radius: 50%;
                background-color: white;
                opacity: 0.6;
                position: absolute;
                top: 0;
                left: 0;
                animation: sk-bounce 2.6s infinite ease-in-out;
            }
            .double-bounce2 {
                animation-delay: -1.3s;
            }
        </style>

        <!-- Scripts -->
        <script defer src="scripts/index.js"></script>
    </head>

    <body>
        <!-- Noscript Fallback -->
        <noscript>請在瀏覽器中啟用 JavaScript，確保網站功能可以正常運作。</noscript>

        <!-- Loading Screen -->
        <div class="loading-layer">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>

        <!-- Locating Screen -->
        <div class="locating-layer locating-layer--vanished">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="locating-layer__icon">
                <path fill="rgb(255, 255, 255)" d="M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.5 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25s-32.76-12.5-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.6-33.8-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.2 26.2z" />
            </svg>
        </div>

        <!-- Section for Reporting Issues -->
        <div class="issues-layer issues-layer--vanished">
            <form name="issue" class="issues" netlify-honeypot="message" data-netlify="true">
                <header class="issues__header">
                    <button type="button" class="issues__button">取消</button>
                    <h1 class="issues__heading">回報問題</h1>
                    <button disabled type="submit" class="issues__button issues__button--bold issues__button--hidden">送出</button>
                </header>
                <div class="issues__pages">
                    <section class="issues__page">
                        <h2 class="issues__subheading">問題類型</h2>
                        <ul class="issues__touchables">
                            <li>
                                <button type="button" data-issue="incorrect-place" class="issues__touchable issues__touchable--first">
                                    <div class="issues__icon-wrapper issues__icon-wrapper--red">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 288 512" class="issues__icon issues__icon--pin">
                                            <path fill="white" d="M112 316.94v156.7l22.02 33.02c4.75 7.12 15.22 7.12 19.97 0l22-33.02v-156.7c-10.4 1.92-21.06 3.06-32 3.06s-21.6-1.14-32-3.06zM144 0C64.47 0 0 64.47 0 144s64.47 144 144 144 144-64.47 144-144S223.53 0 144 0zm0 76c-37.5 0-68 30.5-68 68 0 6.62-5.38 12-12 12s-12-5.38-12-12c0-50.73 41.28-92 92-92 6.62 0 12 5.38 12 12s-5.38 12-12 12z" />
                                        </svg>
                                    </div>
                                    <div class="issues__text">
                                        <h3 class="issues__touchable-heading">地點資訊錯誤</h3>
                                        <p class="issues__touchable-description">回報錯誤的藥局、衛生所資訊</p>
                                    </div>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="issues__arrow">
                                        <path fill="rgb(199, 199, 204)" d="M285.476 272.97L91.132 467.314c-9.373 9.373-24.57 9.373-33.94 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.9L188.505 256 34.484 101.255c-9.335-9.38-9.317-24.544.04-33.9L57.19 44.687c9.373-9.373 24.57-9.373 33.94 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.94z" />
                                    </svg>
                                </button>
                            </li>
                            <li>
                                <button type="button" data-issue="website-issue" class="issues__touchable">
                                    <div class="issues__icon-wrapper issues__icon-wrapper--blue">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="issues__icon issues__icon--cursor">
                                            <path fill="white" d="M302.19 329.126H196.105l55.83 135.993c3.89 9.428-.555 20-9.444 24l-49.165 21.427c-9.165 4-19.443-.57-23.332-9.714l-53.053-129.136-86.664 89.138C18.73 472.7 0 463.554 0 447.977V18.3C0 1.9 19.92-6.096 30.277 5.443L314.69 297.985c11.472 11.18 3.007 31.14-12.5 31.14z" />
                                        </svg>
                                    </div>
                                    <div class="issues__text">
                                        <h3 class="issues__touchable-heading">操作問題</h3>
                                        <p class="issues__touchable-description">回報網站操作問題</p>
                                    </div>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="issues__arrow">
                                        <path fill="rgb(199, 199, 204)" d="M285.476 272.97L91.132 467.314c-9.373 9.373-24.57 9.373-33.94 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.9L188.505 256 34.484 101.255c-9.335-9.38-9.317-24.544.04-33.9L57.19 44.687c9.373-9.373 24.57-9.373 33.94 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.94z" />
                                    </svg>
                                </button>
                            </li>
                            <li>
                                <button type="button" data-issue="general-feedback" class="issues__touchable">
                                    <div class="issues__icon-wrapper issues__icon-wrapper--lightgray">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="issues__icon issues__icon--ellipsis">
                                            <path fill="rgb(10, 132, 255)" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z" />
                                        </svg>
                                    </div>
                                    <div class="issues__text">
                                        <h3 class="issues__touchable-heading">其他問題</h3>
                                        <p class="issues__touchable-description">回報其他問題、提供意見回饋等</p>
                                    </div>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="issues__arrow">
                                        <path fill="rgb(199, 199, 204)" d="M285.476 272.97L91.132 467.314c-9.373 9.373-24.57 9.373-33.94 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.9L188.505 256 34.484 101.255c-9.335-9.38-9.317-24.544.04-33.9L57.19 44.687c9.373-9.373 24.57-9.373 33.94 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.94z" />
                                    </svg>
                                </button>
                            </li>
                        </ul>
                    </section>
                    <section class="issues__page">
                        <!-- Honeypot Field -->
                        <label style="display: none;">
                            <span>Don't fill this out if you're human: </span>
                            <input type="text" name="message" />
                        </label>
                        <input type="hidden" name="type" />
                        <label class="issues__label">
                            <span class="issues__subheading">問題描述</span>
                            <textarea required rows="6" maxlength="1000" placeholder="請描述您發現的問題" name="description" class="issues__input issues__input--multiline"></textarea>
                        </label>
                        <label class="issues__label">
                            <span class="issues__subheading">聯絡方式</span>
                            <input type="email" placeholder="Email（選填）" name="email" class="issues__input" />
                            <span class="issues__subheading issues__subheading--small">若您需要進一步協助，請留下電子郵件供開發者聯繫。</span>
                        </label>
                    </section>
                </div>
            </form>
        </div>

        <!-- Sheet Component -->
        <div id="sheet" class="sheet sheet--condensed sheet--vanished"></div>

        <!-- Control buttons -->
        <div class="controls controls--invisible controls--top-right">
            <button type="button" class="controls__button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="controls__icon controls__icon--report">
                    <path fill="rgb(58, 58, 60)" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z" />
                </svg>
            </button>
            <button type="button" class="controls__button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="controls__icon controls__icon--locate">
                    <path fill="rgb(58, 58, 60)" d="M444.52 3.52L28.74 195.42c-47.97 22.4-31.98 92.75 19.2 92.75h175.9v175.9c0 51.17 70.36 67.17 92.75 19.2L508.5 67.5c16-38.4-25.6-79.97-63.97-63.97z" />
                </svg>
            </button>
        </div>

        <!-- Mapbox Container -->
        <div id="map"></div>
    </body>
</html>
